@page "/hobby"
@using BlazorServer.Data
@rendermode InteractiveServer

<PageTitle>HobbyEditor</PageTitle>

<div class="container-fluid">
    <a href="">Back</a>
    <h1 class="text-center">What are you interested in?</h1>

    <div class="input-group">
        <span class="input-group-text" id="hobby-search-addon"><span class="bi bi-search"></span></span>
        <input type="text" class="form-control" placeholder="Search for hobbies..." aria-label="Search"
            aria-describedby="hobby-search-addon" @bind-value="SearchText" @bind-value:event="oninput">
    </div>


    <div id="myHobbies" class="d-flex justify-content-around">
        @foreach (var hobby in myHobbies)
        {
            <button @onclick="(() => RemoveHobby(hobby))"
                class="btn rounded-pill @(myHobbies.Contains(hobby) ? myHobbyClass : otherHobbyClass)">
                @hobby.HobbyName
            </button>
        }
    </div>


    <div class="d-flex justify-content-around">
        @foreach (var hobby in filteredHobbies)
        {
            <button @onclick="(() => AddHobby(hobby))"
                class="btn rounded-pill @(otherHobbies.Contains(hobby) ? otherHobbyClass : myHobbyClass)">
                @hobby.HobbyName
            </button>
        }

    </div>

</div>


@code {

    private string myHobbyClass = "btn rounded-pill my-hobby";

    private string otherHobbyClass = "btn rounded-pill other-hobby";

    // hardcoded hobby data
    private List<Hobby> myHobbies = new List<Hobby> { new Hobby {HobbyId = 1, HobbyName = "Soccer" }, new Hobby {HobbyId =
2, HobbyName = "Piano" } };

    private List<Hobby> otherHobbies = new List<Hobby> { new Hobby {HobbyId = 3, HobbyName = "Painting" }, new Hobby
{HobbyId = 4, HobbyName = "Running" } };

    private void RemoveHobby(Hobby hobby)
    {
        myHobbies.Remove(hobby);
        otherHobbies.Add(hobby);
    }

    private void AddHobby(Hobby hobby)
    {
        otherHobbies.Remove(hobby);
        myHobbies.Add(hobby);
    }

    // Logic for searching
    public string SearchText = "";

    private List<Hobby> filteredHobbies => otherHobbies.Where(
    hobby => hobby.HobbyName.ToLower().Contains(SearchText.ToLower())
    ).ToList();


}